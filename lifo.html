
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LIFO</title>
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="lifo.css">
</head>
<body>
    <div class="w3-panel w3-padding-large w3-card-4 w3-light-grey">
        <p class="w3-xlarge">L.I.F.O. (Last In First Out)</p>
        <div class="w3-code cssHigh notranslate">   
            <!-- Carico -->
            <div class="w3-row-padding">
                <div class="w3-third">
                    <input id="qta1" class="w3-input w3-border" type="text" placeholder="PEZZI">
                </div>
                <div class="w3-third">
                    <select id="colore" class="w3-select" name="option">
                        <option value="" disabled selected>Choose your color</option>
                        <option value="giallo">gialle</option>
                        <option value="verde">verde</option>
                        <option value="viola">viola</option>
                        <option value="blu">blu</option>
                    </select>
                </div>
                <div class="w3-third">
                    <button id="btnCarico" class="w3-button w3-red">CARICO</button>
                </div>
            </div>
            <!-- Scarico -->
            <div class="w3-row-padding">
                <div class="w3-third">
                    <input id="qta2" class="w3-input w3-border" type="text" placeholder="PEZZI">
                </div>
                <div class="w3-third">
                    <button id="btnScarico" class="w3-button w3-red">SCARICO</button>
                </div>
            </div>
            <!-- Basi -->
            <div id ="container1">
                <div id="box1" class="box"></div>
                <div id="box2" class="box"></div>
                <div id="box3" class="box"></div>
            </div>   
        </div>

<script>
    // Per ogni posizione dell'array corrisponde una pallina ed il suo colore.
    var deposito = [];

    //Richiama la funzione carico quando viene cliccato il bottone con id "btnCarico".
    document.getElementById("btnCarico").addEventListener("click", ()=>{
        carico();
    });

    //Richiama la funzione scarico quando viene cliccato il bottone con id "btnScarico".
    document.getElementById("btnScarico").addEventListener("click", ()=>{
        scarico();
    });
        
    function carico() {
        //Prende rispettivamente colore e quantità in input.
        var quantita = parseInt(document.getElementById("qta1").value);
        var colore = document.getElementById("colore").value;

        //Crea l'elemento pallina a schermo e gli aggiunge la classe.
        const box = document.createElement("div");
        box.classList.add("boxCarico");

        //Per animazione css: setta l'iteration count alla quantità presa in input.
        box.style.animationIterationCount=quantita;
        //Posiziona l'elemento box all'interno del div con id "container1".
        document.getElementById("container1").appendChild(box);
        for (let i = 0; i < quantita; i++) {
            //Colora gli elementi graficamente.
            if(colore=="giallo"){
                box.classList.add("giallo");
            }
            else if(colore=="verde"){
                box.classList.add("verde");
            }
            else if(colore=="viola"){
                box.classList.add("viola");
            }
            else if(colore=="blu"){
                box.classList.add("blu");
            }
            //Aggiunge l'elemento all'array.
            deposito.push(colore);
        }
    }

    function scarico() {
        //Prende quantità in input.
    // vedi A) var quantita = parseInt(document.getElementById("qta2").value);
        var quantita =1;
        //Crea l'elemento pallina e gli aggiunge la classe.
        const box = document.createElement("div");
        box.classList.add("boxScarico");

        /* A) al momento non risolto
        Per animazione css: setta l'iteration count alla quantità presa in input.
        box.style.animationIterationCount=quantita; 
        Per il momento impostiamo la quantità a 1 di default.
        */
        box.style.animationIterationCount=1;
        for (let i = 0; i < quantita; i++) {
            //Toglie l'ultimo elemento dell'array e inserisce il suo valore (nome del colore) nella variablile colore.
            let colore = deposito.pop();
            //Aggiungo il colore.
            if(colore=="giallo"){
                box.classList.add("giallo");
            }
            else if(colore=="verde"){
                box.classList.add("verde");
            }
            else if(colore=="viola"){
                box.classList.add("viola");
            }
            else if(colore=="blu"){
                box.classList.add("blu");
            }
            //Posiziona l'elemento box all'interno del div con id "container1".
            document.getElementById("container1").appendChild(box);
        }
    }  
</script>
</body>
</html>